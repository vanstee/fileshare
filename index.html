<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>FileShare</title>
	<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			$.getJSON("/address_list", function(address_list) {							
				var i;
				var addresses = address_list["result"];
				for(i in addresses) {
					$("#address_list").append("<li><a href=\"#\" class=\"address\">" + addresses[i] + "</a></li>");
				}
			});
						
			$(".address").live("click", function() {
				var address = $(this).text();
				$.getJSON("/ajaxbrowse/" + address, function(file_list) {							
					var i;
					var files = file_list["result"];
					$("#files > #file_list").empty();
					for(i in files) {
						$("#files > #file_list").append("<li><a href=\"http://130-127-6-51.generic.clemson.edu:8080/download/" + i + "\" class=\"file\">" + i + "</a></li>");
					}
				});				
				$("#tabs").tabs("select", "files");
			});
			
			$("#search_query").click(function() {
				var query = $("#query").val();
				$.getJSON("/ajaxsearch/" + query, function(file_list) {
					var i;
					var files = file_list["result"];
					$("#search > #file_list").empty();
					for(i in files) {
						$("#search > #file_list").append("<li><a href=\"http://130-127-6-51.generic.clemson.edu:8080/download/" + files[i] + "\" class=\"file\">" + files[i] + "</a></li>");
					}
				});			
			});
			
			$("#tabs").tabs().css("height", $(document).height() - 25);
		});
	</script>
</head>
<body>
	<div id="tabs">
	    <ul>
	        <li><a href="#servers"><span>Servers</span></a></li>
	        <li><a href="#files"><span>Files</span></a></li>
	        <li><a href="#search"><span>Search</span></a></li>	
	    </ul>
	    <div id="servers">
			<ul id="address_list"></ul>
		</div>
	    <div id="files">
	    	<ul id="file_list"></ul>
	    </div>
	    <div id="search">
			<input type="text" id="query" />
			<input type="button" id="search_query" value="search" />
	    	<ul id="file_list"></ul>
	    </div>	
	</div>
</body>
</html>
